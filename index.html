<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet">
    <title>Agency Chaos Simulator</title>
    <script>
        // Set base path for GitHub Pages vs local development
        (function() {
            const pathname = window.location.pathname;
            const hostname = window.location.hostname;
            // Check if we're on GitHub Pages (either by hostname or pathname)
            // Pathname could be '/chaos-design-agency-game/', '/chaos-design-agency-game', or '/'
            const isGitHubPages = hostname.includes('github.io') || 
                                  pathname.includes('/chaos-design-agency-game') || 
                                  (pathname === '/' && hostname !== 'localhost' && hostname !== '127.0.0.1');
            // On GitHub Pages, files are at /chaos-design-agency-game/chaos-design-agency-game/
            // Locally, files are at ./chaos-design-agency-game/
            window.GAME_BASE_PATH = isGitHubPages ? '/chaos-design-agency-game/chaos-design-agency-game/' : './chaos-design-agency-game/';
            console.log('GAME_BASE_PATH set to:', window.GAME_BASE_PATH, 'isGitHubPages:', isGitHubPages, 'pathname:', pathname, 'hostname:', hostname);
        })();
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="" id="stylesLink">
    <script>
        // Set stylesheet path after GAME_BASE_PATH is defined
        document.getElementById('stylesLink').href = window.GAME_BASE_PATH + 'styles.css';
    </script>
</head>
<body>
    <div class="game-container">
        <!-- Header Section -->
        <header class="header">
            <div class="header-content">
                <div class="header-top-row">
                    <div class="week-counter">
                        <span class="label">Week</span>
                        <span id="currentWeek" class="value">1</span>
                        <span class="separator">|</span>
                        <span class="label">Day</span>
                        <span id="currentDay" class="value">1</span>
                    </div>
                    <div class="resources">
                        <div class="resource-item">
                            <span class="resource-label">üí∞ Money:</span>
                            <span id="money" class="resource-value">$8000</span>
                        </div>
                        <div class="resource-item">
                            <span class="resource-label">üî• Burnout:</span>
                            <span id="burnout" class="resource-value">0%</span>
                        </div>
                        <div class="resource-item resource-item-extra">
                            <span class="resource-label">üòä Morale:</span>
                            <span id="teamMorale" class="resource-value">75</span>
                        </div>
                        <div class="resource-item resource-item-extra">
                            <span class="resource-label">‚≠ê Satisfaction:</span>
                            <span id="satisfaction" class="resource-value">--</span>
                        </div>
                        <div class="resource-item resource-item-extra">
                            <span class="resource-label">‚è∞ Hours (this week):</span>
                            <span id="playerHours" class="resource-value">8/8</span>
                        </div>
                    </div>
                    <div class="header-buttons-group">
                        <button id="headerMenuBtn" class="btn-icon" title="More actions">‚ãØ</button>
                        <button id="settingsBtn" class="btn-icon" title="Settings">‚öôÔ∏è</button>
                    </div>
                    <div id="headerMenuDropdown" class="header-menu-dropdown" style="display: none;">
                        <button id="callInSickBtn" class="menu-item-btn" title="Call in sick to recover (reduces burnout, but you'll lose hours and emails will pile up)">üò∑ Call in Sick</button>
                        <button id="autoAssignBtn" class="menu-item-btn" title="Automatically assign available workers to projects">‚ö° Auto-Assign</button>
                        <button id="viewSummaryBtn" class="menu-item-btn">üìä View Summary</button>
                        <button id="resetBtn" class="menu-item-btn menu-item-danger">üîÑ Reset Game</button>
                    </div>
                </div>
                <div class="header-controls">
                    <div class="clock-display">
                        <span class="clock-icon">üïê</span>
                        <span id="gameClock" class="clock-time">9:00 AM</span>
                        <button id="pauseBtn" class="btn-icon pause-button" title="Pause game (Space)">
                            <span class="pause-icon">‚è∏Ô∏è</span>
                            <span class="play-icon" style="display: none;">‚ñ∂Ô∏è</span>
                        </button>
                        <span class="pause-indicator">‚è∏Ô∏è Paused</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content Area with Tabs -->
        <div class="main-content-wrapper">
            <!-- Messages Tab (Default) -->
            <div id="messagesTab" class="tab-content active">
                <section class="messages-section">
                    <div class="messages-header">
                        <h2>Messages</h2>
                        <span id="notificationBadge" class="notification-badge" style="display: none;">0 notifications</span>
                    </div>
                    <div id="contentArea" class="content-area">
                        <p class="welcome-message">Welcome to Agency Chaos Simulator! The game runs automatically in real-time.</p>
                    </div>
                    <div id="activityFeed" class="activity-feed">
                        <!-- Activity feed will be dynamically inserted here -->
                    </div>
                </section>
            </div>

            <!-- Team Tab -->
            <div id="teamTab" class="tab-content">
                <section class="team-section">
                    <h2>Team</h2>
                    <div id="teamContainer" class="team-container">
                        <!-- Team members will be dynamically inserted here -->
                    </div>
                </section>
            </div>

            <!-- Projects Tab -->
            <div id="projectsTab" class="tab-content">
                <section class="project-timeline">
                    <h2>Active Projects</h2>
                    <div id="projectsContainer" class="projects-container">
                        <!-- Projects will be dynamically inserted here -->
                    </div>
                </section>
            </div>

            <!-- Office Tab -->
            <div id="officeTab" class="tab-content">
                <section class="office-visualization-section">
                    <h2>Office</h2>
                    <div id="officeVisualization" class="office-visualization">
                        <svg id="officeSvg" class="office-svg" viewBox="0 0 800 500" preserveAspectRatio="xMidYMid meet">
                            <!-- Office layout elements will be drawn here -->
                        </svg>
                    </div>
                </section>
            </div>
        </div>

        <!-- Bottom Navigation Bar -->
        <nav class="bottom-nav">
            <button class="nav-tab active" data-tab="messagesTab" title="Messages">
                <span class="nav-icon">üí¨</span>
                <span class="nav-label">Messages</span>
            </button>
            <button class="nav-tab" data-tab="teamTab" title="Team">
                <span class="nav-icon">üë•</span>
                <span class="nav-label">Team</span>
            </button>
            <button class="nav-tab" data-tab="projectsTab" title="Projects">
                <span class="nav-icon">üìã</span>
                <span class="nav-label">Projects</span>
            </button>
            <button class="nav-tab" data-tab="officeTab" title="Office">
                <span class="nav-icon">üè¢</span>
                <span class="nav-label">Office</span>
            </button>
        </nav>
    </div>

    <div id="resetModal" class="modal-overlay" style="display:none;">
        <div class="modal-content reset-modal">
            <h3>Reset Game?</h3>
            <p>This will erase your current progress and start fresh.</p>
            <div class="reset-actions">
                <button id="resetConfirmBtn" class="btn btn-danger">Yes, reset</button>
                <button id="resetCancelBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <div id="settingsModal" class="modal-overlay" style="display:none;">
        <div class="modal-content settings-modal">
            <h2>‚öôÔ∏è Settings</h2>
            <div class="settings-section">
                <h3>Game Controls</h3>
                <button id="pauseBtn" class="btn btn-secondary settings-btn">‚è∏Ô∏è Pause Game</button>
                <button id="restartGameBtn" class="btn btn-secondary settings-btn">üîÑ Restart Game</button>
                <button id="testBtn" class="btn btn-test settings-btn">Test: Log State</button>
            </div>
            <div class="settings-section">
                <h3>Tutorial</h3>
                <label class="settings-checkbox">
                    <input type="checkbox" id="tutorialToggle">
                    <span>Enable Tutorial</span>
                </label>
            </div>
            <div class="settings-section">
                <h3>Help & Info</h3>
                <button id="helpBtn" class="btn btn-secondary settings-btn">üìñ How to Play</button>
                <button id="highScoresBtn" class="btn btn-secondary settings-btn">üèÜ Previous Attempts</button>
                <button id="creditsBtn" class="btn btn-secondary settings-btn">üí° About</button>
            </div>
            <button id="closeSettingsBtn" class="btn btn-primary" style="margin-top: 1rem;">Close</button>
        </div>
    </div>

    <div id="helpModal" class="modal-overlay" style="display:none;">
        <div class="modal-content help-modal">
            <h2>üìñ How to Play</h2>
            <div class="help-section">
                <h3>üéØ Objective</h3>
                <p>Survive 12 weeks running your design agency. Balance client satisfaction, team morale, and finances to achieve victory!</p>
            </div>
            <div class="help-section">
                <h3>üí∞ Resources</h3>
                <ul>
                    <li><strong>Money:</strong> Don't go below -$5,000 or you're bankrupt!</li>
                    <li><strong>Team Morale:</strong> Keep above 10% or team members will quit</li>
                    <li><strong>Client Satisfaction:</strong> Higher satisfaction = bigger payments</li>
                </ul>
            </div>
            <div class="help-section">
                <h3>üìä Projects</h3>
                <ul>
                    <li>Assign team members to make progress</li>
                    <li>Watch deadlines - missing them hurts satisfaction</li>
                    <li>Manage scope creep carefully</li>
                    <li>Complete with 90%+ satisfaction for perfect deliveries</li>
                </ul>
            </div>
            <div class="help-section">
                <h3>üë• Team Management</h3>
                <ul>
                    <li>Higher skill = faster, better work</li>
                    <li>Morale affects work quality</li>
                    <li>Overworked team (10+ days on project) loses morale</li>
                    <li>Rotate assignments to keep fresh</li>
                </ul>
            </div>
            <div class="help-section">
                <h3>üí¨ Conversations</h3>
                <ul>
                    <li>Client requests, team concerns, business decisions</li>
                    <li>Every choice has consequences</li>
                    <li>Response time affects client satisfaction</li>
                    <li>Can defer to handle later (same day only)</li>
                </ul>
            </div>
            <div class="help-section">
                <h3>üèÜ Victory Paths</h3>
                <ul>
                    <li><strong>üåü Rockstar:</strong> 5+ projects, $25k+, 75% avg satisfaction, 70% morale</li>
                    <li><strong>üìà Professional:</strong> 3+ projects, $10k+, 60% satisfaction, 50% morale</li>
                    <li><strong>üí™ Survivor:</strong> 2+ projects, $2k+</li>
                </ul>
            </div>
            <div class="help-section">
                <h3>üí° Tips</h3>
                <ul>
                    <li>Weekly costs: ~$1,500 (payroll + overhead)</li>
                    <li>Balance is key - push too hard = burnout, too cautious = bankruptcy</li>
                    <li>Perfect deliveries give bonus points</li>
                    <li>Managing scope creep earns points</li>
                </ul>
            </div>
            <button id="closeHelpBtn" class="btn btn-primary">Got it!</button>
        </div>
    </div>

    <div id="creditsModal" class="modal-overlay" style="display:none;">
        <div class="modal-content credits-modal">
            <h2>üí° About Agency Chaos Simulator</h2>
            <div class="credits-content">
                <p>A game about the beautiful chaos of running a small creative agency.</p>
                <p>Every decision matters. Every client is unique. Every team member has a breaking point.</p>
                <p style="margin-top: 2rem; font-weight: 700;">Can you survive 12 weeks of deadlines, scope creep, and late-night client emails?</p>
                <p style="margin-top: 2rem; color: #666; font-size: 0.9rem;">Built with chaos, coffee, and care.</p>
            </div>
            <button id="closeCreditsBtn" class="btn btn-primary">Close</button>
        </div>
    </div>

    <script>
        // Load all scripts sequentially using GAME_BASE_PATH to maintain dependency order
        (function() {
            const scripts = [
                'utils.js',
                'constants.js',
                'dom-helpers.js',
                'logger.js',
                'state.js',
                'projects.js',
                'conversations.js',
                'tutorial.js',
                'animations.js',
                'office-visualization.js',
                'timer.js',
                'ui.js',
                'game.js'
            ];
            
            function loadScript(index) {
                if (index >= scripts.length) return;
                
                const script = scripts[index];
                const scriptEl = document.createElement('script');
                scriptEl.src = window.GAME_BASE_PATH + script + '?v=20241205-1600';
                scriptEl.onerror = function() {
                    console.error('Failed to load script:', scriptEl.src);
                    loadScript(index + 1);
                };
                scriptEl.onload = function() {
                    loadScript(index + 1);
                };
                document.body.appendChild(scriptEl);
            }
            
            loadScript(0);
        })();
    </script>
</body>
</html>
